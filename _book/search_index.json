{"index":{"version":"0.5.12","fields":[{"name":"title","boost":10},{"name":"body","boost":1}],"ref":"url","documentStore":{"store":{"./":["es6/2015","es7","io.j","node.j"],"generator-function.html":["39","39;use","4.x","alreadi","catch(ex","console.log(&#39;[error","console.log(&#39;foo","console.log(gen.next","done","error","ex.messag","foo","foo.j","function","g","gen","gen.next","gener","harmoni","invok","invoked&#39","javascript","key","line","next","node","node.j","output","return","run","strict&#39","tri","true","undefin","v","v6.0.0、v7.0.0","v6.9.1","valu","var","yield"],"install.html":["move","node_modul","q","rem","rmdir","s","window"]},"length":3},"tokenStore":{"root":{"3":{"9":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}},";":{"docs":{},"u":{"docs":{},"s":{"docs":{},"e":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}}}}}},"docs":{}},"4":{"docs":{},".":{"docs":{},"x":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}}}},"docs":{},"e":{"docs":{},"s":{"6":{"docs":{},"/":{"2":{"0":{"1":{"5":{"docs":{"./":{"ref":"./","tf":0.16666666666666666}}},"docs":{}},"docs":{}},"docs":{}},"docs":{}}},"7":{"docs":{"./":{"ref":"./","tf":0.16666666666666666}}},"docs":{}},"r":{"docs":{},"r":{"docs":{},"o":{"docs":{},"r":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0273972602739726}}}}}},"x":{"docs":{},".":{"docs":{},"m":{"docs":{},"e":{"docs":{},"s":{"docs":{},"s":{"docs":{},"a":{"docs":{},"g":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}}}}}}}}}},"i":{"docs":{},"o":{"docs":{},".":{"docs":{},"j":{"docs":{"./":{"ref":"./","tf":0.16666666666666666}}}}},"n":{"docs":{},"v":{"docs":{},"o":{"docs":{},"k":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0273972602739726}},"e":{"docs":{},"d":{"docs":{},"&":{"docs":{},"#":{"3":{"9":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}},"docs":{}},"docs":{}}}}}}}}}},"n":{"docs":{},"o":{"docs":{},"d":{"docs":{},"e":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0410958904109589}},".":{"docs":{},"j":{"docs":{"./":{"ref":"./","tf":0.5},"generator-function.html":{"ref":"generator-function.html","tf":0.0273972602739726}}}},"_":{"docs":{},"m":{"docs":{},"o":{"docs":{},"d":{"docs":{},"u":{"docs":{},"l":{"docs":{"install.html":{"ref":"install.html","tf":0.1111111111111111}}}}}}}}}}},"e":{"docs":{},"x":{"docs":{},"t":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0273972602739726}}}}}},"a":{"docs":{},"l":{"docs":{},"r":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"i":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0273972602739726}}}}}}}}},"c":{"docs":{},"a":{"docs":{},"t":{"docs":{},"c":{"docs":{},"h":{"docs":{},"(":{"docs":{},"e":{"docs":{},"x":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}}}}}}}},"o":{"docs":{},"n":{"docs":{},"s":{"docs":{},"o":{"docs":{},"l":{"docs":{},"e":{"docs":{},".":{"docs":{},"l":{"docs":{},"o":{"docs":{},"g":{"docs":{},"(":{"docs":{},"&":{"docs":{},"#":{"3":{"9":{"docs":{},";":{"docs":{},"[":{"docs":{},"e":{"docs":{},"r":{"docs":{},"r":{"docs":{},"o":{"docs":{},"r":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}}}}}}},"f":{"docs":{},"o":{"docs":{},"o":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}}}}}},"docs":{}},"docs":{}}},"g":{"docs":{},"e":{"docs":{},"n":{"docs":{},".":{"docs":{},"n":{"docs":{},"e":{"docs":{},"x":{"docs":{},"t":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}}}}}}}}}}}}}}}}}}}}},"d":{"docs":{},"o":{"docs":{},"n":{"docs":{},"e":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0273972602739726}}}}}},"f":{"docs":{},"o":{"docs":{},"o":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0547945205479452},"install.html":{"ref":"install.html","tf":0.18181818181818182}},".":{"docs":{},"j":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0410958904109589}}}}}},"u":{"docs":{},"n":{"docs":{},"c":{"docs":{},"t":{"docs":{},"i":{"docs":{},"o":{"docs":{},"n":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0684931506849315}}}}}}}}}},"g":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0273972602739726}},"e":{"docs":{},"n":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}},".":{"docs":{},"n":{"docs":{},"e":{"docs":{},"x":{"docs":{},"t":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}}}}}},"e":{"docs":{},"r":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0684931506849315}}}}}}},"h":{"docs":{},"a":{"docs":{},"r":{"docs":{},"m":{"docs":{},"o":{"docs":{},"n":{"docs":{},"i":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0410958904109589}}}}}}}}},"j":{"docs":{},"a":{"docs":{},"v":{"docs":{},"a":{"docs":{},"s":{"docs":{},"c":{"docs":{},"r":{"docs":{},"i":{"docs":{},"p":{"docs":{},"t":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}}}}}}}}}}},"k":{"docs":{},"e":{"docs":{},"y":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}}}},"l":{"docs":{},"i":{"docs":{},"n":{"docs":{},"e":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}}}}},"o":{"docs":{},"u":{"docs":{},"t":{"docs":{},"p":{"docs":{},"u":{"docs":{},"t":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0410958904109589}}}}}}}},"r":{"docs":{},"e":{"docs":{},"t":{"docs":{},"u":{"docs":{},"r":{"docs":{},"n":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}}}}},"m":{"docs":{"install.html":{"ref":"install.html","tf":0.3333333333333333}}}},"u":{"docs":{},"n":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0273972602739726}}}},"m":{"docs":{},"d":{"docs":{},"i":{"docs":{},"r":{"docs":{"install.html":{"ref":"install.html","tf":0.1111111111111111}}}}}}},"s":{"docs":{"install.html":{"ref":"install.html","tf":0.1111111111111111}},"t":{"docs":{},"r":{"docs":{},"i":{"docs":{},"c":{"docs":{},"t":{"docs":{},"&":{"docs":{},"#":{"3":{"9":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}},"docs":{}},"docs":{}}}}}}}}},"t":{"docs":{},"r":{"docs":{},"i":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}},"u":{"docs":{},"e":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0273972602739726}}}}}},"u":{"docs":{},"n":{"docs":{},"d":{"docs":{},"e":{"docs":{},"f":{"docs":{},"i":{"docs":{},"n":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0410958904109589}}}}}}}}},"v":{"6":{"docs":{},".":{"0":{"docs":{},".":{"0":{"docs":{},"、":{"docs":{},"v":{"7":{"docs":{},".":{"0":{"docs":{},".":{"0":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}},"docs":{}}},"docs":{}}},"docs":{}}}},"docs":{}}},"9":{"docs":{},".":{"1":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0273972602739726}}},"docs":{}}},"docs":{}}},"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}},"a":{"docs":{},"l":{"docs":{},"u":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0273972602739726}}}},"r":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0273972602739726}}}}},"y":{"docs":{},"i":{"docs":{},"e":{"docs":{},"l":{"docs":{},"d":{"docs":{"generator-function.html":{"ref":"generator-function.html","tf":0.0136986301369863}}}}}}},"w":{"docs":{},"i":{"docs":{},"n":{"docs":{},"d":{"docs":{},"o":{"docs":{},"w":{"docs":{"install.html":{"ref":"install.html","tf":0.1111111111111111}}}}}}}},"m":{"docs":{},"o":{"docs":{},"v":{"docs":{},"e":{"docs":{"install.html":{"ref":"install.html","tf":0.1111111111111111}}}}}},"q":{"docs":{"install.html":{"ref":"install.html","tf":0.1111111111111111}}}},"length":994},"corpusTokens":["39","39;use","4.x","alreadi","catch(ex","console.log(&#39;[error","console.log(&#39;foo","console.log(gen.next","done","error","es6/2015","es7","ex.messag","foo","foo.j","function","g","gen","gen.next","gener","harmoni","invok","invoked&#39","io.j","javascript","key","line","move","next","node","node.j","node_modul","output","q","rem","return","rmdir","run","s","strict&#39","tri","true","undefin","v","v6.0.0、v7.0.0","v6.9.1","valu","var","window","yield"],"pipeline":["trimmer","stopWordFilter","stemmer"]},"store":{"./":{"url":"./","title":"前言","body":"前言\nNode.js 在历史上经历了分分合合，自从 node.js 与 io.js 合流之后，版本更迭明显加速，对 ES6/2015 甚至 ES7 的支持力度不断攀升，喜欢猎奇的新锐程序员大呼过瘾，但是版本向下兼容的原则也随之受到挑战。本书将重点放在 Node.js 的版本兼容性问题上，希望能够为墨守成规的老程序员们抒困解惑。\n"},"generator-function.html":{"url":"generator-function.html","title":"生成函数","body":"Generator Function\nGenerator Function 是从 4.x 版本开始引入的，当时必须开启 --harmony 开关才能使用。异步执行、非阻塞式的设计，是 JavaScript 作为脚本语言，却能在 Node.js 运行时环境下保持高性能的关键，但在某些不苛求性能的场景下，也成为程序设计的一大障碍。借助 Generator Function 独特的 yield 构造，开发人员可以编写同步风格的 Node.js 程序，而不必在回调函数中层层嵌套。\nERROR: Generator is already running\n这是 v6.9.1 版本在和谐模式下运行时出现的一个现象。来看源代码\n// foo.js\n&#39;use strict&#39;;\n\nfunction foo() {\n    console.log(&#39;foo invoked&#39;);\n}\n\nvar G = function*() {\n    // KEY LINE\n    return foo();\n}\n\nvar gen = G();\nconsole.log(gen.next());\n\ntry {\n    gen.next();\n} catch(ex) {\n    console.log(&#39;[ERROR] &#39; + ex.message);\n}\n\n普通模式下执行上述程序的输出如下：\nnode foo.js\n# OUTPUT\n# foo invoked\n# { value: undefined, done: true }\n# { value: undefined, done: true }\n\n但是打开 --harmony 开关后，问题出现了：\nnode -v\n# OUTPUT:\n# v6.9.1\n\nnode --harmony foo.js\n# OUTPUT:\n# foo invoked\n# undefined\n# [ERROR] Generator is already running\n\n可以看到，差异有二：\n\nnext() 方法没有返回值；\n溢出执行 next() 方法会导出错误。\n\n对于借助生成函数编写同步风格程序的设计来说，这种差异具有相当的破坏性。所幸，这个问题在 v6.0.0、v7.0.0 中都不会出现。\n"},"install.html":{"url":"install.html","title":"安装和卸载","body":"安装和卸载\n文件路径太长，无法删除？\n对于 Windows 用户而言，层层依赖的模块带来的像套娃一样的目录结构，不仅感官上令人厌烦，而且带来一个切实的问题是，生成的模块目录路径太长会导致它很难被删除。很多用户对此束手无策，然而，系统其实已经提示了一种不需要借助任何外部工具的处理方法：\nREM 先将嵌套过深的模块目录剪贴至驱动器根目录下，以缩减文件和目录的绝对路径长度。\nMOVE node_modules \\\n\nREM 然后再删除该目录。\nRMDIR /S /Q \\\n\nREM 如果仍提示无法路径过长，则重复上述操作。\n\n执行上述操作的时候，注意不要覆盖驱动器根目录下现有的文件或目录。\n"}}}